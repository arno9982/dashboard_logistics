<div class="delivery-tracking-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <div class="driver-info">
        <div class="driver-avatar">
          <span>JF</span>
        </div>
        <div class="driver-details">
          <h2>Tournée - Julia Fernandez</h2>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="tourneeProgress"></div>
          </div>
          <span class="progress-text">{{ tourneeProgress | number:'1.0-2' }}%</span>
        </div>
      </div>
      <button class="refresh-btn" (click)="refreshData()">
        <i class="icon-refresh"></i>
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-container">
    <div class="stat-card">
      <i class="icon-flag"></i>
      <div class="stat-info">
        <div class="stat-time">{{ startTime }}</div>
        <div class="stat-label">Départ</div>
      </div>
    </div>
    <div class="stat-card">
      <i class="icon-clock"></i>
      <div class="stat-info">
        <div class="stat-time">{{ endTime }}</div>
        <div class="stat-label">Arrivée estimée</div>
      </div>
    </div>
    <div class="stat-card">
      <i class="icon-route"></i>
      <div class="stat-info">
        <div class="stat-value">{{ totalDistance }} km</div>
        <div class="stat-label">Distance</div>
      </div>
    </div>
    <div class="stat-card">
      <i class="icon-pin"></i>
      <div class="stat-info">
        <div class="stat-value">{{ totalStops }}</div>
        <div class="stat-label">Arrêts</div>
      </div>
    </div>
  </div>

  <!-- Status Summary -->
  <div class="status-summary">
    <div class="status-item status-on-time">
      <div class="status-number">{{ onTimeCount }}</div>
      <div class="status-label">À l'heure</div>
      <div class="status-subtitle">En cours</div>
    </div>
    <div class="status-item status-late">
      <div class="status-number">{{ lateCount }}</div>
      <div class="status-label">En retard</div>
      <div class="status-subtitle">En cours</div>
    </div>
    <div class="status-item status-completed">
      <div class="status-number">{{ completedCount }}</div>
      <div class="status-label">Réalisées</div>
    </div>
    <div class="status-item status-cancelled">
      <div class="status-number">{{ cancelledCount }}</div>
      <div class="status-label">Annulées</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Map Section -->
    <div class="map-section">
      <div class="map-container">
        <!-- LA CARTE EST INTÉGRÉE ICI -->
        <app-map [points]="mapPoints"></app-map>
        
        <!-- Map Controls -->
        <div class="map-controls">
          <button class="map-control-btn" (click)="zoomIn()">+</button>
          <button class="map-control-btn" (click)="zoomOut()">-</button>
          <button class="map-control-btn" (click)="centerMap()">
            <i class="icon-locate"></i>
          </button>
        </div>

        <!-- Legend -->
        <div class="map-legend">
          <div class="legend-item">
            <span class="legend-dot completed"></span>
            <span>Livrée</span>
          </div>
          <div class="legend-item">
            <span class="legend-dot current"></span>
            <span>En cours</span>
          </div>
          <div class="legend-item">
            <span class="legend-dot pending"></span>
            <span>À venir</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Delivery Details Section -->
    <div class="details-section">
      <!-- ... (le reste de votre HTML ne change pas) ... -->
    </div>
  </div>
</div>